panel-element[data-panel-type="NOTEPAD"] {
    &::part(panel-content) {
        flex-direction: column;
        align-items: stretch;
    }

    & textarea {
        width: 100%;
        min-width: 100%;
        height: 100%;
        min-height: 100%;
        padding: 1rem;
        border: none;
        border-radius: var(--small-border-radius);
        background: var(--textarea-bg);
        color: var(--text-primary);
        outline: none;
        font-size: var(--font-inputs);
        font-family: var(--theme-font);
        transition-timing-function: ease;
        transition-duration: var(--quick-transition-time);
        transition-property: filter;
    }

    & textarea:focus {
        filter: contrast(1.06);
    }

    & textarea::placeholder {
        color: var(--text-placeholder);
    }
}

panel-element[data-panel-type="CLOCK"] {
    color: var(--text-primary);

    & time {
        display: block;
        width: 100%;
        height: 100%;
    }

    .date-time {
        position: absolute;
        inset: 0;
        display: flex;
        flex-flow: column nowrap;
        justify-content: center;
        align-items: center;
        border-radius: var(--panel-border-radius);
        font-weight: bold;
        text-align: center;
        container-type: inline-size;
        transform-style: preserve-3d;

        & .time {
            display: inherit;
            justify-content: inherit;
            align-items: inherit;
            color: var(--text-secondary);
            white-space: nowrap;

            & span {
                display: block;
                width: 100%;
                font-size: clamp(calc(var(--font-m) * 0.6), var(--font-m), 50cqw * var(--size-coeff, 1));
            }
        }

        & .date span {
            display: block;
            width: 100%;
            color: var(--text-accent);
            font-size: clamp(calc(var(--font-s) * 0.8), var(--font-s), 8cqw);
        }
    }
}

panel-element[data-panel-type="PHOTO"] {
    & .drop-area {
        position: absolute;
        inset: 0;
        display: flex;
        flex-flow: column nowrap;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        padding: var(--panel-content-padding);
        border-radius: var(--small-border-radius);
        outline: 0.8rem dashed var(--input-secondary);
        text-align: center;
        filter: drop-shadow(0 0 0 var(--input-secondary));
        transition-timing-function: ease;
        transition-duration: var(--quick-transition-time);
        transition-property: filter, outline-offset;

        & input[type="file"] {
            display: none;
        }

        & .image-upload {
            display: inline-block;
            width: 8rem;
            min-width: 2rem;
            max-width: 40%;
            height: 8rem;
            min-height: 2rem;
            max-height: 40%;
            color: var(--input-accent);
            filter: drop-shadow(inset 0 0 0.5rem 0 var(--shadow-col));
            cursor: pointer;
            transition-timing-function: ease;
            transition-duration: var(--quick-transition-time);

            & .image-drop-icon {
                width: 100%;
                height: 100%;
                background: var(--input-secondary);
            }

            &:hover .image-drop-icon {
                background: var(--input-accent);
            }
        }

        & .drop-area-text {
            user-select: none;
            will-change: transform;

            &.drop-area-info {
                font-style: italic;
                font-size: var(--font-s);
            }

            &.drop-area-subinfo {
                font-size: var(--font-xs);
                text-align: left;
            }
        }

        & .info-and-input {
            display: flex;
            flex-flow: row nowrap;
            gap: 1rem;
            align-items: center;
        }

        &.active {
            outline-offset: -0.5rem;
            filter: drop-shadow(0 0 1rem var(--input-secondary));
        }
    }

    & .panel-image {
        position: absolute;
        inset: 0;
        object-fit: contain;
        width: 100%;
        height: 100%;
        border-radius: calc(0.7 * var(--panel-border-radius));
        opacity: 0;
        pointer-events: none;

        &.filled {
            opacity: 1;

            & ~ .drop-area {
                opacity: 0;
            }
        }
    }
}

panel-element[data-panel-type="TODO"] {
    & .todo-container {
        position: relative;
        display: flex;
        flex-flow: column nowrap;
        justify-content: stretch;
        width: 100%;
        height: 100%;
        border-radius: var(--small-border-radius);

        & .todo-list-title-bar,
        & .todo-list-add-bar {
            top: 0;
            display: flex;
            flex-flow: row nowrap;
            gap: 2rem;
            align-items: center;
            will-change: transform;

            &.todo-list-add-bar {
                & .add-todo-task-button {
                    position: absolute;
                    right: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    width: var(--input-height);
                    height: var(--input-height);
                    border-radius: var(--small-border-radius);
                    background: var(--input-secondary);
                    box-shadow: inset 0.1rem 0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*1.5)), inset -0.1rem -0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*0.4)), 0.2rem 0.2rem 0.2rem 0 var(--shadow-col);
                    cursor: pointer;

                    & .add-icon {
                        --target-bg: var(--input-accent);
                        z-index: 1;
                        background: var(--input-bg);
                    }

                    &::after {
                        content: '';
                        position: absolute;
                        inset: 0;
                        z-index: 0;
                        border-radius: inherit;
                        background: var(--input-bg);
                        box-shadow: inset 0.1rem 0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*1.5)), inset -0.1rem -0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*0.4)), 0.2rem 0.2rem 0.2rem 0 var(--shadow-col);
                        opacity: 0;
                        transition: inherit;
                    }

                    &:hover {
                        &::after {
                            opacity: 1;
                        }

                        & .add-icon {
                            transform: rotate(90deg);
                        }
                    }
                }

                & .string-selector,
                & .string-selector-input {
                    width: 100%;
                    will-change: transform;

                    &.string-selector-input {
                        padding-right: calc(var(--input-height) + var(--input-padding));
                    }
                }

            }
        }

        & .todo-list {
            overflow-y: auto;
            width: 100%;
            list-style-type: none;

            & .todo-list-entry {
                position: relative;
                display: flex;
                gap: 2rem;
                justify-content: flex-start;
                align-items: center;
                overflow: hidden;
                width: 100%;
                border-top: 0.2rem solid var(--cell-bg);
                user-select: none;
                transition-timing-function: ease;
                transition-duration: var(--med-transition-time);
                transition-property: opacity;

                & .selector {
                    margin: 0;
                    transition: inherit;
                }

                & .checkbox-label {
                    width: 100%;
                    padding: var(--panel-content-padding);
                }

                & .todo-list-entry-text {
                    position: relative;
                    max-width: calc(100% - 3.8rem);
                    font-size: var(--font-s);
                    overflow-wrap: break-word;
                    transition: inherit;
                    transform: rotateZ(0deg);
                    backface-visibility: hidden;

                    &::before {
                        content: '';
                        position: absolute;
                        top: 50%;
                        display: block;
                        width: 100%;
                        height: 0.2rem;
                        border-radius: var(--tiny-border-radius);
                        background: currentcolor;
                        transition: inherit;
                        transform: scaleX(0);
                        transform-origin: left;
                    }
                }

                &:first-of-type {
                    border-top: none;
                }

                & .checkbox-input:checked {
                    & ~ .todo-list-entry-text {
                        opacity: 0.4;

                        &::before {
                            transform: scaleX(1);
                        }
                    }
                }
            }
        }

    }
}

panel-element[data-panel-type="WEATHER"] {
    .weather-container {
        position: relative;
        display: flex;
        flex-flow: column;
        width: 100%;
        height: 100%;
        isolation: isolate;

        & .weather-bar {
            display: flex;
            flex-flow: row nowrap;
            gap: 2rem;
            align-items: center;

            & .location-search-button {
                left: 0;
                background: none;
                box-shadow: none;
                transition-delay: var(--quick-transition-time);

                & .search-icon {
                    --target-bg: var(--input-accent);
                    z-index: 1;
                    background: var(--input-bg);
                }

                &::before,
                &::after {
                    content: '';
                    position: absolute;
                    inset: 0;
                    z-index: 0;
                    border-radius: inherit;
                    box-shadow: inset 0 0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*1.5)), inset -0.1rem -0.1rem 0.2rem 0 hsl(from var(--input-secondary) h s calc(l*0.4)), 0.2rem 0.2rem 0.2rem 0 var(--shadow-col);
                    transition: inherit;
                }

                &::before {
                    background: var(--input-bg);
                    transform: scale(0);
                    transform-origin: 1rem calc(100% - 1rem);
                }

                &::after {
                    background: var(--input-secondary);
                    opacity: 0;
                }

                &:hover {
                    background: none;
                    box-shadow: none;
                    transition-delay: 0s;

                    &::before {
                        transform: scale(1);
                    }

                    & .search-icon {
                        transform: scale(1.2);
                    }
                }

                &:not(.location-search-button:hover, .location-search-selector.visible ~ .location-search-button) {
                    & .search-icon {
                        transform: scale(0.8) translate(-1rem, 1rem);

                        &::after {
                            opacity: 1;
                        }
                    }
                }

                &:is(.location-search-selector.visible ~ .location-search-button):not(.location-search-button:hover) {
                    &::before {
                        transform: scale(1);
                    }

                    &::after {
                        opacity: 1;
                    }

                    & .search-icon::after {
                        opacity: 0;
                    }
                }
            }


            &.weather-search-bar {
                position: absolute;
                right: 0;
                bottom: 0;
                z-index: 1;
                width: 100%;
                height: var(--input-height);
                transition: transform var(--quick-transition-time) var(--bezier-function);
                isolation: isolate;

                & .location-search-selector {
                    position: absolute;
                    left: 0;
                    transform-origin: 2% 100%;
                    will-change: transform;

                    & .location-search-input {
                        padding-left: calc(var(--input-padding) + var(--input-height));
                    }

                    & .selector-bar-label-text {
                        left: var(--input-height);
                    }
                }

                & .location-search-selector:not(.visible) {
                    pointer-events: none;
                    transform: scaleX(0);
                }

                & .location-search-results {
                    position: absolute;
                    bottom: calc(100% - var(--input-padding));
                    z-index: -1;
                    overflow-y: auto;
                    width: 100%;
                    max-height: calc(var(--height) - 7rem);
                    border-radius: var(--small-border-radius);
                    background: var(--input-bg);
                    list-style: none;
                    filter: drop-shadow(0 0.2rem 0.2rem var(--shadow-col));

                    & .location-search-result {
                        position: relative;
                        padding: calc(var(--panel-content-padding) * 0.7) var(--panel-content-padding);
                        border-top: 0.1rem solid var(--cell-bg);
                        background: inherit;
                        cursor: pointer;
                        transition: filter var(--med-transition-time) ease;

                        &:first-of-type {
                            border-top: none;
                            border-start-start-radius: inherit;
                            border-start-end-radius: inherit;
                        }

                        &:last-of-type {
                            padding-bottom: calc(var(--panel-content-padding) * 1.7);
                            border-end-start-radius: inherit;
                            border-end-end-radius: inherit;
                        }

                        &:hover {
                            filter: brightness(1.3);
                        }
                    }
                }
            }
        }

        & .focused-location {
            position: absolute;
            inset: 0;
            z-index: 2;
            width: calc(100% + 1rem);
            height: calc(100% + 1rem);
            background: var(--panel-bg);
            transition: transform var(--med-transition-time) ease;
            transform: scale(0);

            & .weather-info-section {
                display: flex;
                flex-flow: row nowrap;
                justify-content: space-between;
                align-items: center;
                padding: 1rem;
                border: 0.1rem solid var(--border-subtle);
                border-radius: var(--small-border-radius);
                background: var(--input-bg);
                font-size: 1.2rem;
                user-select: none;
            }

            & ::-webkit-scrollbar-track {
                margin-top: 3rem;
            }

            & .location-container {
                position: relative;
                display: flex;
                flex-flow: column nowrap;
                justify-content: flex-start;
                overflow: auto;
                width: 100%;
                height: 100%;
            }

            & .close-focus-button {
                position: absolute;
                top: -0.5rem;
                left: -1rem;
                padding: 1rem;
                border-radius: var(--small-border-radius);
                background: var(--panel-bg);
                transform: rotate(180deg);
            }

            &.visible {
                transform: scale(1);
            }

            & .preview-header {
                display: none;
                justify-content: space-between;
                align-items: center;
                margin: 0 2.5rem 0.4rem;
                padding: 0.4rem 1rem;
                border-radius: var(--small-border-radius);
                background: var(--shadow-col);

                &.visible {
                    display: flex;
                }
            }

            & .info-header {
                display: flex;
                flex-flow: row nowrap;
                gap: 0.5rem;
                justify-content: space-between;
                align-items: center;
                max-width: 100%;
                container-type: inline-size;

                & .location-info {
                    max-width: 50%;

                    & .location-city {
                        margin-bottom: 1rem;
                        color: var(--text-accent);
                        font-size: clamp(var(--font-s), var(--font-sm), 6cqw);
                        overflow-wrap: break-word;
                    }

                    & .location-subtitle {
                        font-weight: normal;
                        font-size: var(--font-xs);
                    }

                    & .location-time {
                        font-weight: normal;
                    }
                }

                & .weather-overview {
                    display: flex;
                    flex-flow: column nowrap;
                    align-items: center;
                    width: 100%;
                    max-width: 50cqw;

                    & .temperature {
                        font-size: clamp(var(--font-s), var(--font-m), 12cqw);
                    }

                    & .condition {
                        width: calc(100% - 1rem);
                    }

                    & .condition-icon {
                        object-fit: cover;
                    }
                }

                &:not(.preview-header.visible ~ .info-header) > .location-info > .location-city,
                &:not(.preview-header.visible ~ .info-header) {
                    margin-top: 1rem;
                }
            }

            & .weather-info {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                grid-auto-rows: auto;
                gap: 0.5rem;
                padding: 0.5rem;
                font-weight: normal;

                & .info-section-title {
                    color: var(--text-secondary);
                    font-weight: bold;
                    text-transform: uppercase;
                    font-variation-settings: "wdth" 40;

                    &:not(.top-title) {
                        width: min-content;
                    }
                }

                & .weather-info-section.forecast-section {
                    flex-flow: column;
                    grid-row: span 3;
                    grid-column: span 2;

                    & .forecast-entries {
                        display: flex;
                        flex-flow: row nowrap;
                        gap: 2rem;
                        justify-content: flex-start;
                        overflow-x: auto;
                        width: 100%;
                        height: 100%;
                        padding: inherit;
                        list-style: none;

                        & .forecast-entry {
                            display: flex;
                            flex-flow: column nowrap;
                            justify-content: space-between;
                            align-items: center;

                            & .forecast-time {
                                white-space: nowrap;
                            }

                            & .forecast-temp {
                                font-weight: bold;
                                font-size: var(--font-s);
                            }
                        }
                    }
                }

                & .weather-info-section.astrology-section {
                    --astro-icon: var(--moon-icon);
                    --astro-bg: var(--sun-col);
                    grid-row: span 2;
                    grid-column: span 2;
                    gap: 5rem;
                    justify-content: space-around;
                    padding: 2rem 1rem;

                    &::before {
                        content: '';
                        position: absolute;
                        left: calc(50% - 3rem);
                        display: block;
                        width: 6rem;
                        height: 6rem;
                        border: 0.3rem solid;
                        border-color: var(--cell-bg) var(--shadow-col) var(--shadow-col) var(--cell-bg);
                        border-radius: 50%;
                        transform: rotate(45deg);
                    }

                    &::after {
                        content: '';
                        position: absolute;
                        left: calc(50% - 4rem);
                        display: block;
                        width: 2rem;
                        height: 2rem;
                        background: var(--astro-bg);
                        transform: rotate(var(--day-progress, 0deg));
                        transform-origin: 4rem;
                        mask: var(--astro-icon) no-repeat center;
                        mask-size: contain;
                    }

                    & .astrology-time-entry {
                        display: flex;
                        flex-flow: column nowrap;
                        gap: 1rem;
                        justify-content: space-around;
                        align-items: center;
                        height: 100%;
                    }
                }
            }
        }

        & .saved-location-list {
            display: flex;
            flex-flow: column;
            justify-content: flex-start;
            overflow: visible auto;
            padding-top: 1rem;
            list-style-type: none;

            &::-webkit-scrollbar-track {
                margin-bottom: 2rem;
            }

            & .saved-location {
                position: relative;
                display: flex;
                flex-flow: row nowrap;
                gap: 1rem;
                justify-content: space-between;
                align-items: center;
                overflow: visible;
                padding: 1rem;
                border-radius: var(--small-border-radius);
                cursor: pointer;
                transition-timing-function: ease;
                transition-duration: var(--med-transition-time);
                transition-property: opacity;

                &::before {
                    content: '';
                    position: absolute;
                    inset: 0;
                    z-index: -1;
                    border-radius: inherit;
                    background: var(--cell-bg);
                    opacity: 0;
                    transition: inherit;
                }

                & .location-title {
                    color: var(--text-secondary);
                    font-size: var(--font-s);
                }

                & .location-weather {
                    display: flex;
                    flex-flow: column;
                    align-items: flex-end;

                    & .location-current {
                        display: flex;
                        gap: 1rem;
                        align-items: baseline;
                    }

                    & .location-temp {
                        color: var(--text-secondary);
                        font-size: var(--font-s);
                    }

                    & .location-max-min {
                        display: flex;
                        gap: 1rem;
                        font-size: var(--font-xs);
                    }

                    & .temp-label {
                        color: var(--text-secondary);
                    }
                }

                & .remove-location-icon-container {
                    position: relative;
                    width: 0;
                    height: 100%;
                    margin-right: auto;
                    margin-left: 1.5rem;
                }

                & .x-icon {
                    position: absolute;
                    top: calc(50% - 1rem);
                    right: 0;
                    left: 0;
                }

                &:hover::before {
                    opacity: 0.7;
                }
            }
        }
    }
}